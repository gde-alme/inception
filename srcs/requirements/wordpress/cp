FROM debian:bullseye

ARG SERVER_NAME

ARG DB_NAME
ARG DB_HOST
ARG DB_USER
ARG DB_PASS


ARG WP_ADMIN_USER
ARG WP_ADMIN_PASS
ARG WP_ADMIN_MAIL
ARG WP_USER
ARG WP_PASS
ARG WP_MAIL

RUN apt-get update && apt-get upgrade -y && apt-get install -y wget curl unzip \
	php \
	php-cgi \
	php-cli \
	php-fpm \
	php-json \
	php-mysql \
	php-zip \
	php-common \
	php-curl \
	php-xml \
	php-pear \
	php-bcmath \
	default-mysql-client \
	php-pdo \
	php-gd \
	php-mbstring \
	sendmail \
	iputils-ping \
	
	bcmath \
	bz2 \
	Core \
	ctype \
	date \
	dom \
	exif \
	fileinfo \
	filter \
	ftp \
	gd \
	hash \
	iconv \
	imagick \
	json \
	libxml \
	mbstring \
	mysqli \
	mysqlnd \
	openssl \
	pcntl \
	pcre \
	PDO \
	pdo_mysql \
	pdo_sqlite \
	Phar \
	posix \
	readline \
	Reflection \
	session \
	SimpleXML \
	SPL \
	sqlite3 \
	standard \
	tokenizer \
	wddx \
	xml \
	xmlreader \
	xmlwriter \
	xsl \
	zip \
	zlib \
	&& rm -rf /var/lib/apt/lists/

RUN mkdir -p /run/php

COPY ./tools/setup-wdpress.sh ./
RUN chmod +x ./setup-wdpress.sh ; 
ENTRYPOINT ["bash", "./setup-wdpress.sh"]
#ENTRYPOINT ["sh", "-c", "echo 'Starting...' && ./setup-wdpress.sh"]

#rm ./setup-wdpress.sh

#CMD ["php-fpm7.4", "-F"]
